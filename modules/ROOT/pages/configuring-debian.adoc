= Configuring Debian

include::attributes.adoc[]

== Enable sudo [[sudo-config]]

. Become root the traditional way:
+
[source,bash]
----
su
----

. Install the `sudo` package:
+
[source,bash]
----
apt install sudo
----

. Add your user to the `sudo` group:
+
[source,bash,subs=+quotes]
....
usermod -a -G sudo __your_user_name__
....

. Reboot your system.


== Enable automatic updates in Debian [[debian-auto-update]]

Debian can automatically install package updates at configurable times using the Unattended Upgrades feature.

For more information, see the https://wiki.debian.org/UnattendedUpgrades[UnattendedUpgrades] page on the Debian Wiki.


== Enable an early OOM killer [[early-oom]]

The Linux "out-of-memory killer" (OOM Killer) is supposed to terminate the process that uses the most memory when the system is running out of RAM. However, it hardly ever actually executes: it is overly optimistic that the system can eventually handle the problem on its own. This leads to situations when the memory is hopelessly full while the system stays unresponsive for hours until the user presses the power button.

Therefore, an alternative, user-space implementation has been created, `earlyoom`, which is much more strict and predictable.

The `earlyoom` service runs in the background and checks for memory conditions. By default, it kills a process when both the RAM and the swap partition are at least 90% full. These values are configurable.

For details on installation and usage, see the GitHub page: https://github.com/rfjakob/earlyoom[rfjakob/earlyoom]. The context was also discussed on Reddit: https://www.reddit.com/r/linux/comments/7e0pgm/earlyoom_early_oom_daemon/[earlyoom - Early OOM daemon].

NOTE: Ubuntu and Fedora enable the `systemd-oomd` service by default, which meets the same goal.


== Use journald as the only logging service [[only-journald]]

By default, Debian uses `rsyslog` as the system log service. However, `journald` is running anyway all the time and there's no reason to have two log service, other than that `rsyslog` provides plain-text logs. If that doesn't sound compelling to you:

- Disable `rsyslog`:
+
[source,bash]
----
sudo systemctl disable rsyslog
----
+
- Make `journald` store its log permanently (instead of at runtime only). In `/etc/systemd/journald.conf` set:
+
----
Storage=persistent
----


== Enable command-not-found [[set-up-cnf]]

`command-not-found` is a helpful little program, which offers you to install the correct package when you type the command of a program that hasn't been installed yet. Fedora and Ubuntu do this automatically; in Debian, a little effort is needed.

. Install `command-not-found`:
+
[source,bash]
----
sudo apt install command-not-found
----

. Update the packages & commands database:
+
[source,bash]
----
sudo apt-file update
sudo update-command-not-found
----


== Enable the Plymouth boot screen

Plymouth is the pretty animated picture you see when the system is booting up or shutting down. Debian doesn't like pretty stuff by default, and therefore, Plymouth has to be installed manually.

The process is https://wiki.debian.org/plymouth[documented on the Debian Wiki]. However, to save you a few clicks and some reading:

. Install Plymouth and its themes:
+
[source,bash]
----
sudo apt install plymouth plymouth-themes
----

. Edit the `/etc/initramfs-tools/modules` and add modesetting modules for your graphics card:

** For Intel GPUs:
+
----
# KMS
intel_agp
drm
i915 modeset=1
----

** For nVidia GPUs using the Nouveau driver:
+
----
# KMS
drm
nouveau modeset=1
----

** For AMD GPUs (may be slightly outdated):
+
----
# KMS
drm
radeon modeset=1
----

. Open the `/etc/default/grub` file.

. There, uncomment the `GRUB_GFXMODE=` line and set it to your display resolution. For example, `GRUB_GFXMODE=1024x768`. (This may not be necessary and might even uglify grub; test it.)

. Also, edit the kernel line, that is the one starting with `GRUB_CMDLINE_LINUX_DEFAULT=`. Add `splash` at the end and delete `quiet` if you'd like to be able to see detailed `systemd` boot output when you switch out of the pretty animated picture.

. Save the file and update `grub2`:
+
[source,bash]
----
sudo update-grub2
----

. Get the list of installed Plymouth themes:
+
[source,bash]
----
sudo plymouth-set-default-theme -l
----
+
The default theme in Debian Stretch is `softwaves`. The rest are either the themes of earlier Debian releases or are bundled with Plymouth itself, originally coming from Fedora.

. Set a theme for Plymouth to actually use:
+
[source,bash,subs=+quotes]
....
sudo plymouth-set-default-theme -R __your_selected_theme__
....

. Reboot and watch the result. Repeat the last two steps if you want to see more themes in action.


== Enable Wayland in Firefox

On Debian 12 Bookworm, Wayland is the default GNOME session, but Firefox still runs in XWayland. This decreases graphics sharpness when you enable display scaling, for example.

To enable Wayland in Firefox, set the following shell variable:

[source,bash]
----
MOZ_ENABLE_WAYLAND=1
----


== Install Czech localization [[debian-czech-l10n]]

Debian uses different language packaging than Ubuntu, and languages have to be installed more manually.

[source,bash]
----
sudo apt install \
  chromium-l10n firefox-esr-l10n-cs hyphen-cs libreoffice-help-cs \
  libreoffice-l10n-cs
----


include::debian-ubuntu-common.adoc[]
